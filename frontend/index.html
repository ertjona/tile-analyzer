<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Tile Inspector</title>
    <style> /* Basic styling for layout and thumbnails */
        body { font-family: sans-serif; padding: 20px; }
        nav { margin-bottom: 20px; }
        .filter-row { margin-bottom: 10px; }
        /* .results-thumbnail { max-width: 200px; max-height: 200px; border: 1px solid #ddd; } */
        /* Copied modal styles from previous step */
        .modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.5)}.modal-content{background-color:#fefefe;margin:10% auto;padding:20px;border:1px solid #888;width:80%;max-width:900px}.inspector-body{display:flex;gap:20px}#inspector-image-container{flex-shrink:0}#inspector-details{flex-grow:1;overflow-x:auto}#inspector-image{max-width:512px;border:1px solid #ddd}pre{background-color:#eee;padding:10px;border-radius:5px}.close-button{color:#aaa;float:right;font-size:28px;font-weight:bold;cursor:pointer}
		/* frontend/index.html */
		/* Add these new styles inside your existing <style> tag */
		.display-options { position: relative; display: inline-block; margin-bottom: 10px; }
		.dropdown-content { display: none; position: absolute; background-color: #f9f9f9; min-width: 200px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); padding: 12px 16px; z-index: 1; border-radius: 5px; }
		.dropdown-content label { display: block; }
		.show { display: block; }
		table { border:1px solid black; }
		th { border:1px solid black; padding:2px;}
		td { border:1px solid black; padding:2px;}
    </style>
</head>
<body>
    <!-- 
	<nav>
        <a href="/dashboard.html">View Statistics Dashboard Â»</a>
    </nav> 
	//-->
    <h1>Image Tile Analysis & Inspection Platform</h1>

    <div id="controls">
        <h2>Filter & Sort</h2>
        <form id="filter-form">
		    <div class="filter-row">
            <label for="filename-filter">Source File:</label>
            <select id="filename-filter">
                <option value="">All Files</option>
                </select>
            </div>
			
            <div id="filter-container">
                </div>
            <button type="button" id="add-filter-btn">+ Add Filter</button>            
            <br><br>
            <button type="submit">Apply Filters</button>
			<button type="button" id="export-csv-btn" disabled>Export to CSV</button> 
			<button type="button" id="download-images-btn" disabled>Download Images</button> </form>
        </form>
    </div>

	<hr>

    <h2>Results</h2>
	<div class="display-options">
        <button id="display-options-btn">Show/Hide Columns</button>
        <div id="display-options-dropdown" class="dropdown-content">
            </div>
    </div>
	<div id="results-summary" style="margin-bottom: 10px; "></div>
    <table id="results-table">
        <thead>
            </thead>
        <tbody id="results-body">
            </tbody>
    </table>

    <div id="pagination-controls" style="margin-top: 20px; ">
        <button id="prev-button" disabled>&laquo; Previous</button>
        <span id="page-info">Page 1</span>
        <button id="next-button">Next &raquo;</button>
		
		<input type="number" id="page-input" style="width: 60px; margin-left: 20px;" placeholder="Page">
		<button id="go-to-page-btn">Go</button>
    </div>

    <div id="inspector-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Image Inspector</h2>
            <div class="inspector-body">
                <div id="inspector-image-container">
                    <img id="inspector-image" src="" alt="Image Tile">
                </div>
                <div id="inspector-details">
                    <h3>Metadata</h3>
                    <pre id="inspector-metadata"></pre>
                </div>
            </div>
        </div>
    </div>
	
	<div id="download-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close-button">&times;</span>
                <h2>Configure Image Download</h2>
            </div>
            <div class="modal-body">
                <label for="filename-template">Filename Template:</label>
                <input type="text" id="filename-template" value="{json_basename}_{webp_filename}">
                <div class="template-instructions">
                    <p>Use placeholders like <strong>{column_name}</strong> to build the filename.</p>
                    <p>Example: <code>{json_basename}_lap_{laplacian:.2f}_{webp_filename}</code></p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="start-download-btn" class="btn-primary">Start Download</button>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>